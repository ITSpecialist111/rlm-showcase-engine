# Name: Audit Start
kind: AdaptiveDialog
beginDialog:
  kind: OnRecognizedIntent
  id: AuditStart
  intent:
    displayName: AuditStart
    includeInOnSelectIntent: false
    triggerQueries:
      - run audit
      - audit invoices
      - audit code
      - start audit
  actions:
    - kind: InvokeConnectorAction
      id: invoke_start_audit
      connectionReference: copilots_header_54b8d.shared_rlmfunctions
      connectionProperties:
        mode: Invoker
      operationId: start_audit
      parameters:
        query: "Find policy violations"
        scenario: "invoice_audit"
        documents: []
      outputParameters:
        job_id: Global.JobId

    - kind: SendActivity
      id: notify_start
      activity:
        text:
          - "Audit Started! Job ID: {Global.JobId}."

    - kind: SendActivity
      id: prompt_poll
      activity: 
        text:
          - "I will check the status for you..."
          
    - kind: BeginDialog
      id: go_to_poll
      dialog: AuditPoll
